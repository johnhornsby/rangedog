{"version":3,"sources":["public/assets/scripts/src/rangedog.js"],"names":[],"mappings":"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","file":"public/assets/scripts/src/rangedog.js","sourcesContent":["import EventEmitter from \"eventEmitter/EventEmitter\";\nimport Animate from \"./animate\";\nimport Utils from \"./utils\";\n\n\nconst Rangedog = class Rangedog extends EventEmitter {\n\n\n\t\n\tconstructor(options) {\n\t\tsuper();\n\n\t\tthis._DEFAULT_OPTIONS = {\n\t\t\tlength: 1,\n\t\t\tframeLength:1,\n\t\t\twrap: false,\n\t\t\tinertia: false,\n\t\t\trounded: false,\n\t\t\tupdate: function() {}\n\t\t};\n\t\tthis._options = {};\n\t\tthis._length = null;\n\t\tthis._inertia = null;\n\t\tthis._wrap = null;\n\t\tthis._rounded = null;\n\t\tthis._updateCallback = null;\n\n\t\tthis._x = 0;\n\t\tthis._roundedX = 0;\n\t\tthis._deltas = null;\n\t\tthis._animateInstance = null;\n\t\tthis._isAnimating = true;\n\n\t\tthis._init(options);\n\t}\n\n\n\tget index() { return this._getX() }\n\n\tincrement(deltaX) { this._increment(deltaX) }\n\n\tsetTo(x) { this._setTo(x) }\n\n\tslideTo(x) { this._slideTo(x) }\n\n\tstop() { this._stop() }\n\n\tactivateInertiaIfAny() { this._activateInertia() }\n\n\n\n\t_init(options) {\n\t\t// Quick merge of default and incoming options\n\t\tUtils.extend(this._options, this._DEFAULT_OPTIONS);\n\t\tUtils.extend(this._options, options);\n\t\tthis._length = this._options.length;\n\t\tthis._wrap = this._options.wrap;\n\t\tthis._inertia = this._options.inertia;\n\t\tthis._rounded = this._options.rounded;\n\t\tthis._updateCallback = this._options.update;\n\t\tthis._deltas = [];\n\t}\n\n\n\t_increment(deltaX) {\n\t\tthis._clearAnimation();\n\t\tconst x = this._x + deltaX\n\t\tthis._deltas.push({x:deltaX, time: new Date().getTime()});\n\t\tthis._setX(x);\n\t}\n\n\n\t_setTo(x) {\n\t\tthis._clearAnimation();\n\t\tthis._setX(x);\n\t}\n\n\n\t_slideTo(x, toNearest = true) {\n\t\tthis._clearAnimation();\n\t\tif (x === this._x) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._isAnimating = true;\n\t\tif (toNearest === true) {\n\t\t\tx = this._checkAndAdjustPolarityForShortestDistance(x, this._x, this._length);\n\t\t}\n\t\tthis._animateInstance = new Animate({\n\t\t\tstartValue: this._x,\n\t\t\tendValue: x,\n\t\t\tupdate: this._onAnimateUpdate.bind(this),\n\t\t\tcomplete: this._onAnimateComplete.bind(this)\n\t\t});\n\t\tthis._animateInstance.start();\n\t\treturn true;\n\t}\n\n\n\t_checkAndAdjustPolarityForShortestDistance(to, from, length) {\n\t\t// example 1\n\t\t// to = 10\n\t\t// from = 170\n\t\t// distance = 10 - 170 = -160\n\t\t// reverse = 10 + (180 - 170) = 20\n\t\t// return 170 + 20 = 190\n\t\t// example 2\n\t\t// to = 170\n\t\t// from = 10\n\t\t// distance = 170 - 10 = 160\n\t\t// reverse = 10 + (180 - 170) = 20\n\t\t// return 10 - 20 = -10\n\t\tconst distance = to - from;\n\t\tlet reverseDistance = 0;\n\t\tif (distance < 0) {\n\t\t\treverseDistance = to + (length - from);\n\t\t\tif (Math.abs(distance) < reverseDistance) {\n\t\t\t\treturn to;\n\t\t\t}else{\n\t\t\t\treturn from + reverseDistance;\n\t\t\t}\n\t\t} else {\n\t\t\treverseDistance = from + (length - to);\n\t\t\tif (distance < reverseDistance) {\n\t\t\t\treturn to;\n\t\t\t}else{\n\t\t\t\treturn from - reverseDistance;\n\t\t\t}\n\t\t}\n\t}\n\t\t\n\n\n\t_stop() {\n\t\tthis._clearAnimation();\n\t}\n\n\n\t_setX(x) {\n\t\tthis._x = x;\n\t\tif (this._wrap === true) {\n\t\t\tthis._x = this._modulo(x, this._length);\n\t\t}\n\t\tif (this._rounded === true) {\n\t\t\tx = Math.round(this._x);\n\t\t\tif (x === this._length) {\n\t\t\t\tx = 0;\n\t\t\t}\n\t\t\tif (this._roundedX === x) {\n\t\t\t\t// avoid calling callback\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tthis._roundedX = x;\n\t\t\t}\n\t\t}\n\t\tthis._updateCallback(x);\n\t}\n\n\n\t_getX() {\n\t\tlet x = this._x;\n\t\tif (this._rounded === true) {\n\t\t\tx = Math.round(this._x);\n\t\t\tif (x === this._length) {\n\t\t\t\tx = 0;\n\t\t\t}\n\t\t}\n\t\treturn x;\n\t}\n\n\n\t_modulo( num, div ) {\n  \t\treturn ( ( num % div ) + div ) % div;\n\t}\n\n\n\t_clearAnimation() {\n\t\tthis._isAnimating = false;\n\t\tif (this._animateInstance) {\n\t\t\tthis._animateInstance.destroy();\n\t\t\tthis._animateInstance = null;\n\t\t}\n\t}\n\n\n\t_onAnimateUpdate(x) {\n\t\tthis._setX(x);\n\t}\n\n\n\t_onAnimateComplete() {\n\t\tthis._clearAnimation();\n\t}\n\n\n\t_activateInertia() {\n\t\tif (!this._deltas && this._deltas.length === 0) {\n\t\t\treturn false;\n\t\t}\n\t\tconst deltaInfo = this._deltas.pop();\n\t\tconst velocity = deltaInfo.x;\n\t\tif (new Date().getTime() - deltaInfo.time > 100) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst destinationX = this._x + (velocity / 0.1);\n\t\tconsole.log(`_activateInertia: destinationX ${destinationX} velocity ${velocity}`);\n\t\tthis._slideTo(destinationX, false);\n\n\t}\n\n}\n\n\nexport default Rangedog;"]}